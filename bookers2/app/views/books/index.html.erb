<main>
 <% if @book_new.errors.any? %>
  <%= @book_new.errors.count %>件のerrorが発生しました
  <% @book_new.errors.full_messages.each do |message| %>
   <%= message %>
   <% end %>
   <% end %>

      <%= render "books/list", book: @book_new, user: @user %>


        <h2>Books</h2>
        <table class="table">
          <tr>
            <th></th>
            <th>Title</th>
            <th>Opinion</th>
            <th></th>
            <th colspan="3"></th>
          </tr>

          <% @books.each do |book| %>
          <div>
            <tr>
              <th>
                <%= link_to user_path(book.user.id) do %>
                <%= attachment_image_tag book.user, :profile_image, fallback: "no_image.png", size: "40x40" %>
                <% end %>
              </th>
              <th><%= link_to book.title, book_path(book.id) %></th>
              <th><%= book.body %></th>
              <th id="favorite_buttons_<%= book.id %>">
                <%= render partial: "books/favorite", locals: { book: book } %>
              </th>
              <th>
                <p>コメント数：<%= book.book_comments.count %></p>
              </th>
            </tr>
          </div>
          <% end %>
        </table>
      </div>
    </div>
    </div>

</main>